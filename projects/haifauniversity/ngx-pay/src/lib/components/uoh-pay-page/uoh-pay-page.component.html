<ng-container *ngIf="loading$ | async">
  <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
  <div class="uoh-pay-page-row">נא להמתין.</div>
  <div class="uoh-pay-page-row"><b>אין לסגור את החלון.</b></div>
</ng-container>
<div [style.visibility]="visibility$ | async">
  <form (ngSubmit)="charge()" novalidate>
    <div class="field">
      <label for="credit_card_number">מספר כרטיס אשראי</label>
      <div id="credit_card_number" class="input"></div>
      <div class="uoh-error" *ngIf="fields.hasError('credit_card_number')">
        {{ fields.getError('credit_card_number') }}
      </div>
    </div>
    <div class="field" *ngIf="requestCardHolderId">
      <label for="card_holder_id_number">ת״ז של בעל הכרטיס</label>
      <div id="card_holder_id_number" class="input"></div>
      <div class="uoh-error" *ngIf="fields.hasError('card_holder_id_number')">
        {{ fields.getError('card_holder_id_number') }}
      </div>
    </div>
    <div class="field">
      <label for="expiry">תוקף</label>
      <div id="expiry" class="input"></div>
      <div class="uoh-error" *ngIf="fields.hasError('expiry')">
        {{ fields.getError('expiry') }}
      </div>
    </div>
    <div class="field">
      <label for="cvv">3 ספרות בגב הכרטיס</label>
      <div id="cvv" class="input"></div>
      <div class="uoh-error" *ngIf="fields.hasError('cvv')">
        {{ fields.getError('cvv') }}
      </div>
    </div>
    <div *ngIf="fields.error" class="uoh-error">
      {{ fields.error }}
    </div>
    <button mat-raised-button color="primary" type="submit" [disabled]="!fields.valid">ביצוע תשלום</button>
  </form>
</div>
